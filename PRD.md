# 家味食记（Family Taste）小程序 PRD（优化版）

## 一、产品概述

**产品名称**：家味食记（Family Taste）  
**产品类型**：家庭饮食管理微信小程序  
**目标用户**：关注家庭健康饮食、需要记录和管理家庭菜单的用户  
**核心价值**：帮助家庭用户科学、便捷地记录、制定和分享每日菜单，满足个性化饮食需求，提升家庭饮食健康与生活乐趣。

---

## 二、核心功能

### 1. 菜单记录与计划
- 支持用户按日期记录每日三餐（早/中/晚），可手动输入菜品名称、分量等。
- 支持提前制定一天或一周的菜单计划，指定具体日期。
- 系统可根据历史记录智能推荐菜品。
  - **智能推荐实现思路**：基于用户过往菜单、家庭成员偏好、冰箱现有食材、季节性等因素，结合简单的规则引擎或AI接口（如ChatGPT、百度API等）生成推荐菜单。

### 2. 特殊定制
- 家庭成员管理：可添加成员，设置如"减肥"、"糖尿病"、"儿童"等饮食标签。
  - **标签扩展性**：标签可自定义，支持多标签叠加，便于后续扩展更多饮食需求。
- 菜品定制：为特殊成员制定菜单时，按标签筛选合适菜品，并显示营养信息。
  - **营养信息来源**：优先采用权威数据库（如中国食物成分表），结合网络抓取和用户补充，支持后续AI自动补全。

### 3. 菜单库
- 菜品展示：每道菜有图片、食材用量、制作步骤（文字/视频）。
- 营养信息：展示热量、蛋白质、脂肪、碳水、维生素等。
- 菜品来源：支持网络抓取和用户自创，用户可编辑完善。
  - **网络抓取/AI生成接口方案**：
    - 网络抓取：通过爬虫定期抓取主流美食网站（如下厨房、美食杰等）公开数据，需设置内容审核机制，防止不良信息。
    - AI生成：对接AI内容生成接口（如OpenAI、百度文心一言等），根据用户输入生成菜谱，生成内容需人工审核。
  - **内容审核机制**：自动过滤敏感词+人工抽检，确保内容健康合规。
- 搜索与筛选：按名称、食材、菜系、烹饪方式、难度等多条件查找。

### 4. 转盘选菜
- 有趣的转盘界面，点击后随机选菜。
  - **动画交互细节**：转盘旋转动画，支持加速/减速，选中后高亮显示。
- 支持设置筛选条件（口味、食材类型、烹饪时间等）。
  - **筛选条件可配置性**：用户可自定义筛选项，如辣/不辣、荤/素、快手菜/慢炖菜等，支持多选。
- 选中后展示菜品详情。

### 5. 菜单分享
- 支持通过微信、短信等方式分享菜单。
- 客人可在分享链接中查看、添加菜品并留言，分享者可收到反馈。
  - **分享链接有效期**：默认有效期7天，过期后自动失效，保护用户隐私。
  - **数据安全与隐私保护**：所有分享内容仅限指定对象访问，数据传输加密，用户可随时撤回分享。

### 6. 冰箱管理
- 支持手动和扫码录入食材，记录名称、数量、保质期等。
  - **扫码识别技术方案**：集成微信小程序扫码API，结合第三方食品条码数据库，自动识别食材信息。
- 过期提醒：提前通知即将过期食材。
  - **提醒机制**：支持微信订阅消息/小程序内推送，用户可自定义提醒时间（如提前1天、3天等）。
- 菜品推荐：根据现有食材推荐可做菜品，并可一键生成菜单。

### 7. 页面布局
- 底部导航栏：冰箱管理、主页、个人中心。
- 主页：优先显示今日菜单（如有），下方2行2列入口（今日计划、周计划、转盘选菜、菜单库）。
  - **页面原型描述**：
    - 主页顶部为日期和今日菜单卡片，卡片下方为4个功能入口（2行2列），每个入口为圆角按钮+图标+文字。
    - 底部导航栏固定，突出当前页面。
    - 其他页面采用卡片式分区，操作按钮悬浮或底部固定，保证操作便捷。

---

## 三、用户流程

1. **首次进入**：引导用户添加家庭成员、录入冰箱食材。
2. **日常使用**：
   - 主页查看今日菜单，快速进入计划、转盘、菜单库等功能。
   - 记录/制定菜单，选择家庭成员，按需定制。
   - 管理冰箱食材，接收过期提醒。
   - 分享菜单，接收客人反馈。
3. **特殊场景**：
   - 为特殊成员定制菜单，系统自动筛选推荐。
   - 使用转盘随机选菜，增加趣味性。

---

## 四、页面结构与模块划分

### 1. 底部导航栏
- 冰箱管理
- 主页
- 个人中心

### 2. 主页
- 今日菜单（如有）
- 2x2功能入口：今日计划、周计划、转盘选菜、菜单库

### 3. 菜单记录/计划页面
- 日历选择
- 菜品添加/编辑
- 智能推荐

### 4. 家庭成员管理
- 成员列表
- 标签设置（支持自定义和多标签）

### 5. 菜单库
- 菜品列表（图片+简介）
- 搜索/筛选
- 菜品详情（图片、食材、步骤、营养信息、来源）
- 网络抓取/AI生成入口，内容审核提示

### 6. 转盘选菜
- 筛选条件设置（多选）
- 转盘动画（加速/减速、高亮）
- 结果展示

### 7. 菜单分享
- 分享方式选择
- 分享历史
- 客人反馈处理
- 链接有效期与撤回

### 8. 冰箱管理
- 食材录入（手动/扫码）
- 食材列表（保质期排序/提醒）
- 一键推荐菜品/生成菜单
- 过期提醒设置

### 9. 个人中心
- 账号信息
- 数据统计
- 设置

---

## 五、数据结构建议（详细版）

为保证系统的可扩展性和后续功能拓展，所有主要数据表均预留扩展字段，并采用灵活的数据结构设计。以下为主要数据表结构建议：

### 1. 用户表（User）
| 字段名         | 类型         | 说明                   | 备注/扩展建议                |
| -------------- | ------------ | ---------------------- | ----------------------------- |
| userId         | String       | 用户唯一ID（主键）      | 微信openid/自增ID            |
| openId         | String       | 微信openid              |                              |
| unionId        | String       | 微信unionid             | 便于多端打通                 |
| nickname       | String       | 昵称                    |                              |
| avatarUrl      | String       | 头像URL                 |                              |
| phone          | String       | 手机号                  | 预留绑定手机号               |
| familyList     | Array        | 家庭成员ID数组          |                              |
| role           | String       | 用户角色                | 普通用户/管理员/游客等        |
| status         | String       | 状态                    | 正常/禁用/注销               |
| createTime     | Date         | 创建时间                |                              |
| updateTime     | Date         | 更新时间                |                              |
| ext            | Object       | 扩展字段                | 预留后期扩展                  |

### 2. 家庭成员表（FamilyMember）
| 字段名         | 类型         | 说明                   | 备注/扩展建议                |
| -------------- | ------------ | ---------------------- | ----------------------------- |
| memberId       | String       | 成员唯一ID（主键）      |                              |
| userId         | String       | 所属用户ID              |                              |
| name           | String       | 成员姓名                |                              |
| avatarUrl      | String       | 头像URL                 |                              |
| tags           | Array        | 标签数组                | 如减肥/糖尿病/儿童/自定义     |
| birthday       | Date         | 生日                    | 便于年龄相关推荐             |
| gender         | String       | 性别                    |                              |
| healthInfo     | Object       | 健康信息                | 预留疾病/过敏/特殊需求等      |
| status         | String       | 状态                    | 正常/禁用                    |
| createTime     | Date         | 创建时间                |                              |
| updateTime     | Date         | 更新时间                |                              |
| ext            | Object       | 扩展字段                | 预留后期扩展                  |

### 3. 菜品表（Dish）
| 字段名         | 类型         | 说明                   | 备注/扩展建议                |
| -------------- | ------------ | ---------------------- | ----------------------------- |
| dishId         | String       | 菜品唯一ID（主键）      |                              |
| name           | String       | 菜品名称                |                              |
| imageUrl       | String       | 菜品图片                |                              |
| ingredientList | Array        | 食材列表                | [{name, amount, unit}]        |
| steps          | Array        | 制作步骤                | [{stepNo, desc, image/video}] |
| nutrition      | Object       | 营养信息                | 热量/蛋白质/脂肪等            |
| tags           | Array        | 标签                    | 低脂/高蛋白/川菜/自定义等     |
| cuisine        | String       | 菜系                    | 川菜/粤菜/西餐等              |
| difficulty     | String       | 难度                    | 简单/中等/困难                |
| cookTime       | Number       | 烹饪时间（分钟）         |                              |
| source         | String       | 来源                    | 网络/自创/AI生成              |
| authorId       | String       | 创建者ID                |                              |
| status         | String       | 状态                    | 正常/下架/待审核              |
| createTime     | Date         | 创建时间                |                              |
| updateTime     | Date         | 更新时间                |                              |
| ext            | Object       | 扩展字段                | 预留后期扩展                  |

### 4. 菜单计划表（MenuPlan）
| 字段名         | 类型         | 说明                   | 备注/扩展建议                |
| -------------- | ------------ | ---------------------- | ----------------------------- |
| planId         | String       | 计划唯一ID（主键）      |                              |
| userId         | String       | 所属用户ID              |                              |
| memberId       | String       | 关联成员ID              |                              |
| date           | Date         | 日期                    |                              |
| mealType       | String       | 餐次                    | 早餐/午餐/晚餐                |
| dishList       | Array        | 菜品ID数组              |                              |
| remark         | String       | 备注                    |                              |
| source         | String       | 来源                    | 手动/智能推荐/AI生成          |
| status         | String       | 状态                    | 正常/已完成/已取消            |
| createTime     | Date         | 创建时间                |                              |
| updateTime     | Date         | 更新时间                |                              |
| ext            | Object       | 扩展字段                | 预留后期扩展                  |

### 5. 食材表（Ingredient）
| 字段名         | 类型         | 说明                   | 备注/扩展建议                |
| -------------- | ------------ | ---------------------- | ----------------------------- |
| ingredientId   | String       | 食材唯一ID（主键）      |                              |
| userId         | String       | 所属用户ID              |                              |
| name           | String       | 食材名称                |                              |
| amount         | Number       | 数量                    |                              |
| unit           | String       | 单位                    | 克/个/袋等                    |
| barcode        | String       | 条形码                  | 便于扫码录入                  |
| expireDate     | Date         | 保质期                  |                              |
| location       | String       | 存放位置                | 冰箱/冷冻/常温等              |
| status         | String       | 状态                    | 正常/已用完/过期              |
| createTime     | Date         | 创建时间                |                              |
| updateTime     | Date         | 更新时间                |                              |
| ext            | Object       | 扩展字段                | 预留后期扩展                  |

### 6. 分享表（Share）
| 字段名         | 类型         | 说明                   | 备注/扩展建议                |
| -------------- | ------------ | ---------------------- | ----------------------------- |
| shareId        | String       | 分享唯一ID（主键）      |                              |
| userId         | String       | 分享者用户ID            |                              |
| menuPlanId     | String       | 菜单计划ID              |                              |
| shareType      | String       | 分享类型                | 微信/短信/链接等              |
| target         | String/Array | 分享对象                | openid/手机号/昵称等          |
| feedbackList   | Array        | 客人反馈列表            | [{userId, content, time}]     |
| addDishList    | Array        | 客人添加菜品ID列表      |                              |
| status         | String       | 状态                    | 有效/过期/撤回                |
| expireTime     | Date         | 过期时间                |                              |
| createTime     | Date         | 创建时间                |                              |
| updateTime     | Date         | 更新时间                |                              |
| ext            | Object       | 扩展字段                | 预留后期扩展                  |

### 7. 操作日志表（OperationLog）
| 字段名         | 类型         | 说明                   | 备注/扩展建议                |
| -------------- | ------------ | ---------------------- | ----------------------------- |
| logId          | String       | 日志唯一ID（主键）      |                              |
| userId         | String       | 操作用户ID              |                              |
| action         | String       | 操作类型                | 新增/编辑/删除/分享等         |
| targetType     | String       | 目标类型                | 菜品/菜单/食材/成员等         |
| targetId       | String       | 目标ID                  |                              |
| detail         | Object       | 详细内容                |                              |
| createTime     | Date         | 操作时间                |                              |
| ext            | Object       | 扩展字段                | 预留后期扩展                  |

---

> 说明：
> - 所有表均预留 `ext` 字段用于后期灵活扩展。
> - 采用数组/对象结构便于存储多标签、多成员、多反馈等复杂数据。
> - 关键表均有 `createTime`、`updateTime` 字段，便于数据追踪和审计。
> - 可根据业务需要增加索引、唯一约束等。
> - 后续如需支持多家庭/多用户协作，可增加家庭表、权限表等。

---

## 六、技术与实现建议

- 前端：微信小程序原生开发，WXML+WXSS+JS，必要时可引入Taro/Uni-App等跨端框架
- 后端：建议使用微信云开发（云函数+云数据库），便于小程序一体化部署
- 状态管理：简单场景用globalData，复杂场景可引入mobx-miniprogram等
- 安全性：所有用户输入需校验，防止XSS/SQL注入等，分享内容加密，用户数据分级权限管理
- 性能优化：图片压缩、懒加载，数据分页，缓存常用数据，图片资源使用CDN
- 测试：单元测试+手动测试，保证核心功能稳定
- 内容审核：自动+人工结合，敏感词过滤，违规内容举报入口

---

## 七、开发计划建议

1. 项目初始化与基础架构搭建
2. 主页与底部导航开发
3. 菜单记录/计划、家庭成员管理
4. 菜单库与菜品详情（含网络抓取/AI生成与内容审核）
5. 冰箱管理与食材推荐（含扫码识别与提醒）
6. 转盘选菜与菜单分享（含交互动画与安全机制）
7. 测试与优化（每阶段结束后进行用户测试和反馈收集，持续优化）
8. 上线与用户反馈收集，快速迭代

---

## 八、运营与增长建议

- 用户激励：签到、积分、家庭健康打卡等，提升活跃度
- 成长体系：家庭健康等级、成就徽章等
- 社区互动：用户可分享菜单到社区，点赞、评论、收藏
- 数据分析：后台统计用户活跃、菜单偏好、食材消耗等，辅助产品优化
- 合作拓展：与健康、食品、厨具等品牌合作，丰富内容和服务

---

如需进一步细化某一模块的功能流程、页面原型或接口设计，请随时告知！ 